import { SatisfactionButton, SatisfactionButtonId } from '../Util/CSHelper'
import { GetMenuID } from '../Util/Interactive'
import { addChatbotReminderUtil, removeChatbotReminderUtil } from '../Util/BotToolkit'

export async function ValidateUserRatingAction(e: EventMiddleware, d: DataMiddleware, n: StoryNextFunction) {
  const menuId = GetMenuID(e.query)

  const selected = SatisfactionButton.find(i => i.reply.id == menuId)

  if (selected) {
    switch (selected.reply.id) {
      case SatisfactionButtonId.puas:
        return await n(e, d)
      case SatisfactionButtonId.tidakPuas:
        return await n(e, d)
    }
  }
}

export const addChatbotReminder = async (event: EventMiddleware, data: DataMiddleware, next: StoryNextFunction) => {
  await addChatbotReminderUtil(event)

  return next(event, data)
}

export const removeChatbotReminder = async (event: EventMiddleware, data: DataMiddleware, next: StoryNextFunction) => {
  await removeChatbotReminderUtil(event)
  return next(event, data)
}