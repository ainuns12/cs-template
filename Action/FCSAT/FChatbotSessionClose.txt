import { EngineBull } from '@bahasa-ai/plugins-chatbot'
import { GetMenuID } from '../../Util/Interactive'

export const F1ChatbotSessionCloseAction = async (event: EventMiddleware, data: DataMiddleware, next: StoryNextFunction) => {
  // const stm = await data.STM.memory
  // const ltm = await data.LTM.memory
  const menuId = GetMenuID(event.query)


  if (menuId == 'tidak') {
    // clear job
    await EngineBull.get.cancelChatbotCloseSessionQueue(event.integration, event.sourceId)

  } else {
    // @TODO: keep session open, some feedback maybe?
  }

  return next(event, data)
}
