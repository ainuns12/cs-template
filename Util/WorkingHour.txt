import moment from 'moment-timezone'

function IsWorkingDay(): boolean {
  const startDay = Number(process.env.WD_START)
  const endDay = Number(process.env.WD_END)


  const today = moment.tz('Asia/Jakarta').day()

  if (today < startDay || today > endDay) {
    return false
  }

  return true

}

export function IsWorkingHour(): boolean {
  const isWorking = IsWorkingDay()
  if (!isWorking) return false

  const startTime = Number(process.env.WH_START)
  const endTime = Number(process.env.WH_END)

  const currentHour = moment().hours()
  if (currentHour < startTime || currentHour > endTime) {

    return false
  }

  return true
}

export function WorkingDay(): string {
  const startDay = Number(process.env.WD_START)
  const endDay = Number(process.env.WD_END)

  const days = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu']
  return `${days[startDay]} - ${days[endDay]}`

}

export function WorkingHour(): string {
  const startTime = Number(process.env.WH_START)
  const endTime = Number(process.env.WH_END)

  const start = moment().hours(startTime).minutes(0).format('HH.mm')
  const end = moment().hours(endTime).minutes(0).format('HH.mm')

  return `${start} - ${end}`

}